const functions = require('firebase-functions');

// // Create and Deploy Your First Cloud Functions
// // https://firebase.google.com/docs/functions/write-firebase-functions
//
// exports.helloWorld = functions.https.onRequest((request, response) => {
//  response.send("Hello from Firebase!");
// });


var dog = `
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@***,@@@@@@@@@@@@
@@@@@@@@@@@@/,,,...,,////**...,@@@@@@@@
@@@@@@@@#... ... *(/*,,.@&(**,,,@@@@@@@
@@@@@@@@ . . .../(///*,.,&@#*...@@@@@@@
@@@@@@@@@@... ..(///*,.   %&/   @@@@@@@
@@@@@@@@@@.... .,/,. *  . ,&&(,.@@@@@@@
@@@@@@,&@#(/.,,.,/*,,...,&&., . &@@@@@@
@@@@%..@@#(/*(/*///*,.*(@@&&&**.&&@@@@@
@%/(@.,&@@%(&@///(*,..,(@@@@&*,./&@@@@@
//@@@,.,/@@&@&&*.,  ..,*&&&@%.. ,#@@@@@
*/@@@@,,.,&@@@%&%* , ,(&@@&*##%##@@@@@@
//(@@@@@.,..*@@&&%#*,,..//%&%#%%%@@@@@@
///#&@@@@@.,....(%%%#*..##%#,%(%@@@@@@@
/(//#@@@@@@@@# .     .@@@@@@@@@@@@@@@@@
//((#@@@@@@@@&@&%%#(##@@@@@@@@@@@@@@@@@
/(/((@@@@@@@@&&&&%###%@@@@@@@@@@@@@@@@@
//(/(&@@@@@@&&%#%####%@@@@@@@@@@@@@@@@@
///(((@@@@@@&&%%%%##%#@@@@@@@@@@@@@@@@@
//(/((((@@&&&%#%&%###%@@@@@@@@@@@@@@@@@
`;

var cat = `
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@*,*@@@@@@,*/@@@@@@
@@@@@@@@@@@@@@@@@@@@@...,*##(*...@@@@@@
@@@@@@@@@@@@@@@@@@@@@. * ,,/, ., @@@@@@
@@@@@@@@@@@@@@@@@@@@@#/,***./***(@@@@@@
@@@@@@@@@@@@@@@@@@@@@(/,,., ..,*(@@@@@@
@@@@@@@@@@@@@@@@@@@@@@/,.,,,*,.,%@@@@@@
@@@@@@@@@@@@@@@@@@@@@.**,,....,*,(@@@@@
@@@@@@@@@@@@@@@@@@@,,,,,,..     ./@@@@@
@@@@@@@@@@@@@@@@@@..,*,,, .     ,*#@@@@
@@@@@@@@@@@@@@@@@*,..*/*..     .,/#@@@@
@@@@@@@@@@@@@@@@. *,..(*,,.,.  . /&@@@@
@@@@@@@@@@@@@@@.  /.. */...,, ../(@@@@@
@@@@@@@@@@@@@@   *,*, .(/..,*  .*(@@@@@
@@@@@@@@@@@@.   .*,,,..,(*,*(,..,(@@@@@
@@@@@@@@@@   ..,/,.,,,../*,*(* ,*&@@@@@
@@@@@@*. ....@@@/, ,@*  ,*,*(*.,*@@@@@@
@@@,,....@@@@@@@/,.@@@  ./,*(,.*(@@@@@@
@@@@@@@@@@@@@@@@(, ,@@@. *(,/.,/@@@@@@@
@@@@@@@@@@@@@@@@@*./@@@@   *..*/@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@*.,*/@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@&.,/@@@@@@@@
`
// flakiness is a float between 0 and 1; higher values create a flakier API
function getPet(flakiness) {
  if(Math.random() < flakiness) {
    return "ERROR\n";
  }
  
  if(Math.random() > 0.5) {
    return dog;
  } else {
    return cat;
  }
}

// unflaky API
exports.pet = (req, res) => {
  res.send(getPet(0));
};

// flaky API
exports.pet_flaky = (req, res) => {
  res.send(getPet(0.8));
};